{"version":3,"file":"bundle.min.js","mappings":"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","sources":[".././src/styles/styles.sass",".././node_modules/css-loader/dist/runtime/api.js",".././node_modules/css-loader/dist/runtime/sourceMaps.js",".././node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js",".././node_modules/style-loader/dist/runtime/insertBySelector.js",".././node_modules/style-loader/dist/runtime/insertStyleElement.js",".././node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js",".././node_modules/style-loader/dist/runtime/styleDomAPI.js",".././node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://2048/./src/styles/styles.sass?f3ce",".././src/code/cell.ts",".././src/code/direction.ts",".././src/code/game.ts",".././src/code/grid.ts",".././src/code/helpers.ts",".././src/code/htmlrenderer.ts",".././src/code/inputhandler.ts",".././src/code/position.ts",".././src/code/storage.ts","../webpack/bootstrap","../webpack/runtime/compat get default export","../webpack/runtime/define property getters","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/make namespace object",".././src/code/index.ts"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"form{float:left;margin-bottom:20px}.select-wrap{width:100px;height:32px;position:relative;float:left;color:#888;overflow:hidden}.select-wrap:after{width:10%;height:100%;position:absolute;right:10px;top:0;z-index:1;padding:4px 8px;text-align:center;content:\\\"▼\\\";pointer-events:none}label{height:32px;float:left;clear:left;margin-right:12px;line-height:30px;font-size:14pt;color:#888}select{width:100px;height:32px;border:1px solid #888;border-radius:6px;background:#282828;color:#888;font-size:12pt;-webkit-appearance:none;-moz-appearance:none;appearance:none;text-indent:10px;cursor:pointer}select:hover{border-color:#ccc;color:#ccc}select:focus{outline:none}select option{color:#888}select option:focus{outline:none}select option:checked{background-color:#444;color:#ccc}html{--gridsize: 4 // max 16}body{margin:0;padding:0;background:radial-gradient(black 15%, transparent 16%) 0 0,radial-gradient(black 15%, transparent 16%) 8px 8px,radial-gradient(rgba(255, 255, 255, 0.1) 15%, transparent 20%) 0 1px,radial-gradient(rgba(255, 255, 255, 0.1) 15%, transparent 20%) 8px 9px;background-color:#282828;background-size:16px 16px;font-family:\\\"Segoe UI\\\",Tahoma,Geneva,Verdana,sans-serif;font-size:14pt;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;color:#ccc;background:#282828}.container{--scale: calc(1.25 - (var(--gridsize) / 16));--cells: calc(var(--gridsize) * 100px);--margins: calc((var(--gridsize) - 1) * 4px);--width: calc(var(--cells) + var(--margins) + (2 * 15px));width:calc(var(--scale)*var(--width));margin:0 auto;padding:20px}h1{display:inline-block;float:left;margin-top:0;margin-bottom:24px;font-size:40pt;line-height:40px;color:#d2691e;text-shadow:0 2px 2px #fff}#back,#restart,#score,#highscore{display:inline-block;padding:5px;border:1px solid #888;border-radius:6px;background:#282828;text-align:center;color:#888}#restart,#back{float:left;width:80px;height:20px;line-height:18px;margin-bottom:10px;margin-right:10px;font-size:15pt;cursor:pointer}#restart:hover,#back:hover{color:#ccc;border-color:#ccc}#restart{clear:left}#score,#highscore{float:right;color:#ccc;height:44px;width:100px;font-size:17pt;font-weight:bold;padding-top:0;margin-bottom:10px}#score:before,#highscore:before{display:block;font-size:12pt;line-height:18px;font-weight:normal;color:#888;padding:0}#score:before{content:\\\"score\\\"}#score{clear:right;margin-bottom:20px}#highscore:before{content:\\\"best\\\"}#game{position:relative;--cells: calc(var(--gridsize) * 100px);--margins: calc((var(--gridsize) - 1) * 4px);width:calc(var(--cells) + var(--margins) + (2 * 15px));height:calc(var(--cells) + var(--margins) + (2 * 15px));transform-origin:top left;transform:scale(calc(1.25 - var(--gridsize) / 16));clear:both;text-align:center;box-shadow:0px 0px 0px 5px #444,0px 0px 0px 7px #888,0px 0px 0px 12px #000}#gameover,.grid{position:absolute;width:100%;height:100%}#gameover{z-index:100;font-size:30pt;background:rgba(0,0,0,.6);color:#ccc}#gameover span{display:inline-block;width:90%;white-space:pre-line;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.grid{background:#282828}.cell{position:absolute;width:104px;height:104px;top:0;left:0;perspective-origin:center center;perspective:300px;transition-duration:.25s;transition-property:left,top,transform,box-shadow,opacity;transition-timing-function:ease-in}.tile{position:absolute;width:100px;height:100px;margin:4px;margin-right:0;background:none;text-align:center;transform-style:preserve-3d;transition-duration:.25s;transition-property:transform;transition-timing-function:ease-in}.front,.back{position:absolute;width:100%;height:100%;line-height:92px;box-sizing:border-box;top:0;left:0;border:4px solid red;border-radius:12.5px;box-shadow:4px 4px 4px rgba(0,0,0,.7);backface-visibility:hidden;font-size:20px;font-weight:bold}.front{z-index:10;transform:rotateY(0deg)}.x-0{left:15px;margin-left:-4px}.x-1{left:119px}.x-2{left:223px}.x-3{left:327px}.x-4{left:431px}.x-5{left:535px}.x-6{left:639px}.x-7{left:743px}.x-8{left:847px}.x-9{left:951px}.x-10{left:1055px}.x-11{left:1159px}.x-12{left:1263px}.x-13{left:1367px}.x-14{left:1471px}.x-15{left:1575px}.y-0{top:15px;margin-top:-4px}.y-1{top:119px}.y-2{top:223px}.y-3{top:327px}.y-4{top:431px}.y-5{top:535px}.y-6{top:639px}.y-7{top:743px}.y-8{top:847px}.y-9{top:951px}.y-10{top:1055px}.y-11{top:1159px}.y-12{top:1263px}.y-13{top:1367px}.y-14{top:1471px}.y-15{top:1575px}.val-0{background:#afeeee;border-color:#31d3d3;color:#1c8282;font-size:60px}.val-1{background:#afccee;border-color:#317bd3;color:#1c4a82;font-size:57px}.val-2{background:#b5afee;border-color:#4031d3;color:#251c82;font-size:54px}.val-3{background:#d7afee;border-color:#9831d3;color:#5d1c82;font-size:51px}.val-4{background:#eeafe3;border-color:#d331b6;color:#821c70;font-size:48px}.val-5{background:#eeafc0;border-color:#d3315d;color:#821c38;font-size:45px}.val-6{background:#eec0af;border-color:#d35d31;color:#82381c;font-size:42px}.val-7{background:#eee3af;border-color:#d3b631;color:#82701c;font-size:39px}.val-8{background:#d7eeaf;border-color:#98d331;color:#5d821c;font-size:36px}.val-9{background:#b5eeaf;border-color:#40d331;color:#25821c;font-size:33px}.val-10{background:#afeecc;border-color:#31d37b;color:#1c824a;font-size:30px}.val-11{background:#afeeee;border-color:#31d3d3;color:#1c8282;font-size:27px}.willflip-Up{transform:rotateX(180deg)}.willflip-Down{transform:rotateX(-180deg)}.willflip-Left{transform:rotateY(-180deg)}.willflip-Right{transform:rotateY(180deg)}.flipped-Up{transform:rotateX(-180deg)}.flipped-Down{transform:rotateX(180deg)}.flipped-Left{transform:rotateY(180deg)}.flipped-Right{transform:rotateY(-180deg)}.moveunder{z-index:2}.willappear,.disappeared{opacity:0;transform:scale(0.3);z-index:1}.done .disappeared{opacity:1;transform:scale(1.2) rotate(-360deg);z-index:1}.appeared,.willdisappear{opacity:1;transform:scale(1) rotate(0deg);z-index:2}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/styles/styles.sass\",\"webpack://./src/styles/select.sass\",\"webpack://./src/styles/consts.sass\",\"webpack://./src/styles/mixins.sass\"],\"names\":[],\"mappings\":\"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\",\"sourcesContent\":[\"@import './mixins'\\n@import './select'\\n@import './consts'\\n\\nhtml\\n    --gridsize: 4 // max 16\\nbody\\n    margin: 0\\n    padding: 0\\n    background: radial-gradient(black 15%, transparent 16%) 0 0, radial-gradient(black 15%, transparent 16%) 8px 8px, radial-gradient(rgba(255,255,255,.1) 15%, transparent 20%) 0 1px, radial-gradient(rgba(255,255,255,.1) 15%, transparent 20%) 8px 9px\\n    background-color: $bgcolor\\n    background-size: 16px 16px\\n    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\\n    font-size: 14pt\\n    @include unselectable()\\n    color: $txtcolor\\n    background: $bgcolor\\n\\n.container\\n    @include containersize($cellsize, $cellmargin, $gridmargin)\\n    margin: 0 auto\\n    padding: 20px\\n\\nh1\\n    display: inline-block\\n    float: left\\n    margin-top: 0\\n    margin-bottom: 24px\\n    font-size: 40pt\\n    line-height: 40px\\n    color: chocolate\\n    text-shadow: 0 2px 2px white\\n\\n#back, #restart, #score, #highscore\\n    display: inline-block\\n    padding: 5px\\n    border: 1px solid $bordercolor\\n    border-radius: 6px\\n    background: $bgcolor\\n    text-align: center\\n    color: $bordercolor\\n\\n#restart, #back\\n    float: left\\n    width: 80px\\n    height: 20px\\n    line-height: 18px\\n    margin-bottom: 10px\\n    margin-right: 10px\\n    font-size: 15pt\\n    cursor: pointer\\n    &:hover\\n        color: $txtcolor\\n        border-color: $txtcolor\\n\\n#restart\\n    clear: left\\n\\n#score, #highscore\\n    float: right\\n    color: $txtcolor\\n    height: 44px\\n    width: 100px\\n    font-size: 17pt\\n    font-weight: bold\\n    padding-top: 0\\n    margin-bottom: 10px\\n    &:before\\n        display: block\\n        font-size: 12pt\\n        line-height: 18px\\n        font-weight: normal\\n        color: $bordercolor\\n        padding: 0\\n\\n#score:before\\n    content: 'score'\\n#score\\n    clear: right\\n    margin-bottom: 20px\\n\\n#highscore:before\\n    content: 'best'\\n\\n#game\\n    position: relative\\n    @include gridsize($cellsize, $cellmargin, $gridmargin)\\n    @include scale()\\n    clear: both\\n    text-align: center\\n    box-shadow: 0px 0px 0px 5px #444, 0px 0px 0px 7px $bordercolor, 0px 0px 0px 12px #000\\n\\n#gameover, .grid\\n    position: absolute\\n    width: 100%\\n    height: 100%\\n\\n#gameover\\n    z-index: 100\\n    font-size: 30pt\\n    background: rgba(0, 0, 0, 0.6)\\n    color: $txtcolor\\n    span\\n        display: inline-block\\n        width: 90%\\n        white-space: pre-line\\n        @include center()\\n\\n.grid\\n    background: $bgcolor\\n\\n.cell\\n    position: absolute\\n    width: $cellsize + $cellmargin\\n    height: $cellsize + $cellmargin\\n    top: 0\\n    left: 0\\n    perspective-origin: center center\\n    perspective: 300px\\n    transition-duration: $duration\\n    transition-property: left, top, transform, box-shadow, opacity\\n    transition-timing-function: ease-in\\n\\n.tile\\n    position: absolute\\n    width: $cellsize\\n    height: $cellsize\\n    margin: $cellmargin\\n    margin-right: 0\\n    background: none\\n    text-align: center\\n    transform-style: preserve-3d\\n    transition-duration: $duration\\n    transition-property: transform\\n    transition-timing-function: ease-in\\n\\n.front, .back\\n    /* hide back of pane during swap */\\n    position: absolute\\n    width: 100%\\n    height: 100%\\n    line-height: $cellsize - (2 * $borderwidth)\\n    box-sizing: border-box\\n    top: 0\\n    left: 0\\n    border: $borderwidth solid red\\n    border-radius: calc($cellsize / 8)\\n    box-shadow: 4px 4px 4px rgba(0, 0, 0, 0.7)\\n    backface-visibility: hidden\\n    font-size: $fontsize\\n    font-weight: bold\\n\\n.front\\n    /* front pane, placed above back */\\n    z-index: 10\\n    transform: rotateY(0deg)\\n\\n/* styles for cell x, y positions */\\n\\n@for $i from 0 through 16 - 1\\n    .x-#{$i}\\n        left: $gridmargin + ($cellsize + $cellmargin) * $i\\n        @if $i == 0\\n            margin-left: -$cellmargin\\n\\n@for $i from 0 through 16 - 1\\n    .y-#{$i}\\n        top: $gridmargin + ($cellsize + $cellmargin) * $i\\n        @if $i == 0\\n            margin-top: -$cellmargin\\n\\n/* styles for tile values (.val-11 = pow(2, 11) =2048) */\\n\\n$startcol: #AFEEEE\\n@for $i from 0 through $expmax\\n    .val-#{$i}\\n        $deg: calc(360deg / 11) * $i\\n        $col: adjust-hue($startcol, $deg)\\n        background: $col\\n        border-color: darken($col, 30%)\\n        color: darken($col, 50%)\\n        font-size: 60px - ($i * 3)\\n\\n// animations\\n\\n.willflip-Up\\n    transform: rotateX(180deg)\\n.willflip-Down\\n    transform: rotateX(-180deg)\\n.willflip-Left\\n    transform: rotateY(-180deg)\\n.willflip-Right\\n    transform: rotateY(180deg)\\n\\n.flipped-Up\\n    transform: rotateX(-180deg)\\n.flipped-Down\\n    transform: rotateX(180deg)\\n.flipped-Left\\n    transform: rotateY(180deg)\\n.flipped-Right\\n    transform: rotateY(-180deg)\\n\\n.moveunder\\n    z-index: 2\\n\\n.willappear, .disappeared\\n    opacity: 0\\n    transform: scale(0.3)\\n    z-index: 1\\n\\n.done .disappeared\\n    opacity: 1.0\\n    transform: scale(1.2) rotate(-360deg)\\n    z-index: 1\\n\\n.appeared, .willdisappear\\n    opacity: 1.0\\n    transform: scale(1.0) rotate(0deg)\\n    z-index: 2\\n\\n\",\"@import './mixins'\\n@import './consts'\\n\\nform\\n    float: left\\n    // clear: left\\n    margin-bottom: 20px\\n\\n.select-wrap\\n    width: 100px\\n    height: 32px\\n    position: relative\\n    float: left\\n    color: $bordercolor\\n    overflow: hidden\\n\\n.select-wrap:after\\n    width: 10%\\n    height: 100%\\n    position: absolute\\n    right: 10px\\n    top: 0\\n    z-index: 1\\n    padding: 4px 8px\\n    text-align: center\\n    content: \\\"▼\\\"\\n    pointer-events: none\\n\\nlabel\\n    height: 32px\\n    float: left\\n    clear: left\\n    margin-right: 12px\\n    line-height: 30px\\n    font-size: 14pt\\n    color: $bordercolor\\n\\nselect\\n    width: 100px\\n    height: 32px\\n    border: 1px solid $bordercolor\\n    border-radius: 6px\\n    background: $bgcolor\\n    color: $bordercolor\\n    font-size: 12pt\\n    @include noappearance()\\n    text-indent: 10px\\n    cursor: pointer\\n    &:hover\\n        border-color: $txtcolor\\n        color: $txtcolor\\n    &:focus\\n        outline: none\\n    option\\n        color: $bordercolor\\n        &:focus\\n            outline: none\\n        &:checked\\n            background-color: #444\\n            color: $txtcolor\\n\",\"$fontsize: 20px\\n$cellsize: 100px\\n$gridmargin: 15px\\n$cellmargin: 4px\\n$borderwidth: 4px\\n$duration: 0.25s\\n$expmax: 11\\n\\n$bgcolor: #282828\\n$bordercolor: #888\\n$txtcolor: #ccc\\n\",\"@mixin center()\\n    position: absolute\\n    top: 50%\\n    left: 50%\\n    transform: translate(-50%, -50%)\\n\\n@mixin gridsize($cellsize, $cellmargin, $gridmargin)\\n    --cells: calc(var(--gridsize) * #{$cellsize})\\n    --margins: calc((var(--gridsize) - 1) * #{$cellmargin})\\n    // width: calc((var(--gridsize) * #{$cellsize}) + (var(--gridsize) - 1) * #{$cellmargin} + (2 * #{$gridmargin}))\\n    // height: calc((var(--gridsize) * #{$cellsize}) + (var(--gridsize) - 1) * #{$cellmargin} + (2 * #{$gridmargin}))\\n    width: calc(var(--cells) + var(--margins) + (2 * #{$gridmargin}))\\n    height: calc(var(--cells) + var(--margins) + (2 * #{$gridmargin}))\\n\\n@mixin containersize($cellsize, $cellmargin, $gridmargin)\\n    --scale: calc(1.25 - (var(--gridsize) / 16))\\n    --cells: calc(var(--gridsize) * #{$cellsize})\\n    --margins: calc((var(--gridsize) - 1) * #{$cellmargin})\\n    --width: calc(var(--cells) + var(--margins) + (2 * #{$gridmargin}))\\n    width: calc(var(--scale) * var(--width))\\n\\n@mixin scale()\\n    transform-origin: top left\\n    transform: scale(calc(1.25 - (var(--gridsize) / 16) ))\\n\\n@mixin clearfix()\\n    content: ''\\n    clear: both\\n    display: table\\n\\n@mixin unselectable()\\n    -moz-user-select: none\\n    -webkit-user-select: none\\n    -ms-user-select: none\\n    user-select: none\\n\\n@mixin noappearance()\\n    -webkit-appearance: none\\n    -moz-appearance: none\\n    appearance: none\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n\n      content += cssWithMappingToString(item);\n\n      if (needLayer) {\n        content += \"}\";\n      }\n\n      if (item[2]) {\n        content += \"}\";\n      }\n\n      if (item[4]) {\n        content += \"}\";\n      }\n\n      return content;\n    }).join(\"\");\n  }; // import a list of modules into the list\n\n\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || \"\").concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join(\"\\n\");\n  }\n\n  return [content].join(\"\\n\");\n};","\"use strict\";\n\nvar stylesInDOM = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n\n  return updater;\n}\n\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n/* istanbul ignore next  */\n\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n\n    memo[target] = styleTarget;\n  }\n\n  return memo[target];\n}\n/* istanbul ignore next  */\n\n\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n\n  target.appendChild(style);\n}\n\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\n\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\n\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n\n  var needLayer = typeof obj.layer !== \"undefined\";\n\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n\n  css += obj.css;\n\n  if (needLayer) {\n    css += \"}\";\n  }\n\n  if (obj.media) {\n    css += \"}\";\n  }\n\n  if (obj.supports) {\n    css += \"}\";\n  }\n\n  var sourceMap = obj.sourceMap;\n\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  options.styleTagTransform(css, styleElement, options.options);\n}\n\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n\n  styleElement.parentNode.removeChild(styleElement);\n}\n/* istanbul ignore next  */\n\n\nfunction domAPI(options) {\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\n\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\n\nmodule.exports = styleTagTransform;","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!./styles.sass\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!./styles.sass\";\n       export default content && content.locals ? content.locals : undefined;\n","import { Pos, IPos } from './position';\nimport { direction } from './direction';\n\nexport type CellOrNull = Cell | null;\nexport interface ICellState {\n    pos: IPos;\n    val: number;\n}\n\nexport interface ICellRenderState extends ICellState {\n    oldPos?: IPos;\n    oldVal?: number;\n    mergeDir?: direction;\n    new: boolean;\n}\n\nexport class Cell {\n    public static fromState(state: ICellState): Cell {\n        return new Cell(state.val, Pos.fromState(state.pos));\n    }\n    private _oldVal?: number = undefined;\n    private _oldPos?: Pos = undefined;\n    private _mergeDir?: direction = undefined;\n    private _new: boolean = true;\n    private _pos: Pos;\n    private _val: number;\n    get pos() {\n        return this._pos;\n    }\n    set pos(pos) {\n        if (!this._oldPos) {\n            this._oldPos = this._pos;\n        }\n        this._pos = pos;\n    }\n    get val() {\n        return this._val;\n    }\n    set val(val) {\n        this._oldVal = this._val;\n        this._val = val;\n    }\n    get merged() {\n        // could alse check _mergeDir here\n        return (this._oldVal !== undefined);\n    }\n\n    constructor(val: number, pos?: Pos) {\n        this._val = val;\n        this._pos = pos ? pos : new Pos();\n    }\n\n    public prepareMove() {\n        this._oldPos = undefined;\n        this._oldVal = undefined;\n        this._mergeDir = undefined;\n        this._new = false;\n    }\n\n    public setMergeDir(dir: direction) {\n        this._mergeDir = dir;\n    }\n\n    public canMergeWith(other: CellOrNull): boolean {\n        return (other !== null)\n                && (!this.merged)\n                && (!other.merged)\n                && (this.val === other.val);\n    }\n\n    public toState(): ICellState {\n        return {\n            pos: this.pos,\n            val: this.val,\n        };\n    }\n\n    public toRenderState(): ICellRenderState {\n        return {\n            pos: this.pos,\n            val: this.val,\n            oldPos: this._oldPos,\n            oldVal: this._oldVal,\n            mergeDir: this._mergeDir,\n            new: this._new\n        };\n    }\n}\n","type DirValue = -1 | 0 | 1;\n\nexport class Direction {\n    public x: DirValue = 0;\n    public y: DirValue = 0;\n    constructor(x: DirValue, y: DirValue) {\n        this.x = x;\n        this.y = y;\n    }\n}\n\n// clockwise start at UP\nconst UP = new Direction(0, -1);\nconst RIGHT = new Direction(1, 0);\nconst DOWN = new Direction(0, 1);\nconst LEFT = new Direction(-1, 0);\nexport const DIRECTIONS: Direction[] = [UP, RIGHT, DOWN, LEFT];\n\nexport enum direction {Up = 0, Right, Down, Left}\n","import { Pos } from './position';\nimport { Grid, IGridState, IGridRenderState } from './grid';\nimport { Direction, direction, DIRECTIONS } from './direction';\nimport { Cell, CellOrNull } from './cell';\nimport { randomInt } from './helpers';\nimport { IInputHandler } from './inputhandler';\nimport { IGameStorage } from './storage';\n\nexport type GridOrSize = Grid | number;\nexport interface IGameState {\n    won: boolean;\n    done: boolean;\n    score: number;\n    grid: IGridState;\n}\n\nexport interface IGameRenderState {\n    size: number;\n    won: boolean;\n    done: boolean;\n    score: number;\n    highscore: number;\n    grid: IGridRenderState;\n}\nexport interface IRenderer {\n    render(state: IGameRenderState): void;\n    updatescores(score: number, highscore: number): void;\n}\n\nexport class Game {\n    public static fromState(state: IGameState, renderer?: IRenderer,\n                            inputHandler?: IInputHandler, storage?: IGameStorage): Game {\n        const grid = Grid.fromState(state.grid);\n        const game = new Game(grid, renderer, inputHandler, storage, true);\n        game._won = state.won;\n        game._done = state.done;\n        game._score = state.score;\n        return game;\n    }\n\n    public readonly grid: Grid;\n    private _started: boolean = false;\n    private _won: boolean = false;\n    private _done: boolean = false;\n    private _score: number = 0;\n    private _renderer?: IRenderer;\n    private _inputHandler?: IInputHandler;\n    private _storage?: IGameStorage;\n\n    private readonly size: number;\n    get won() {\n        return this._won;\n    }\n    get done() {\n        return this._done;\n    }\n    set done(val) {\n        this._done = val;\n    }\n    get highscore(): number {\n        if (this._storage) {\n            return this._storage.getHighScore(this.size);\n        } else {\n            return 0;\n        }\n    }\n    set highscore(val: number) {\n        if (this._storage) {\n            this._storage.storeHighScore(this.size, val);\n        }\n    }\n    get score() {\n        return this._score;\n    }\n    set score(val) {\n        this._score = val;\n        if (val > this.highscore) {\n            this.highscore = val;\n        }\n        this.updateScores();\n    }\n\n    constructor(gridOrSize: GridOrSize = 4, renderer?: IRenderer,\n                inputHandler?: IInputHandler, storage?: IGameStorage, fromState: boolean = false) {\n        if (gridOrSize instanceof Grid) {\n             this.grid = gridOrSize;\n             this.size = this.grid.size;\n        } else {\n            this.grid = new Grid(gridOrSize);\n            this.size = gridOrSize;\n        }\n        this._renderer = renderer;\n        this._inputHandler = inputHandler;\n        this._storage = storage;\n        this._started = fromState;\n        if (this._inputHandler) {\n            this._inputHandler.reset();\n            this._inputHandler.on('move', this.playMove.bind(this));\n            this._inputHandler.on('restart', this.restart.bind(this));\n        }\n        this.reset();\n    }\n\n    public restart() {\n        this.grid.reset();\n        this.reset();\n        this._started = false;\n        this.start();\n    }\n\n    public reset() {\n        this._done = false;\n        this._won = false;\n        this.score = 0;\n    }\n\n    public start(fillAtStart: number = 2) {\n        if (!this._started) {\n            for (let i = 0; i < fillAtStart; i++) {\n                const pos = this.grid.randomEmptyPosition();\n                if (pos) {\n                    this.grid.addCell(pos, this.newCellValue());\n                }\n            }\n            this.save();\n        }\n        this.render();\n        this.updateScores();\n    }\n\n    public toState(): IGameState {\n        return {\n            won: this.won,\n            done: this.done,\n            score: this.score,\n            grid: this.grid.toState()\n        };\n    }\n\n    public toRenderState(): IGameRenderState {\n        return {\n            size: this.size,\n            won: this.won,\n            done: this.done,\n            score: this.score,\n            highscore: this.highscore,\n            grid: this.grid.toRenderState()\n        };\n    }\n\n    public newCellValue(): number {\n        return randomInt(100) < 50 ? 2 : 4;\n    }\n\n    public hasWon(): boolean {\n       return (this.grid.toArray().indexOf(2048) >= 0);\n    }\n\n    public canMakeMove(): boolean {\n        return (this.grid.canShiftCells() || this.grid.canMergeCells());\n    }\n\n    public makeMove(dir: direction): boolean {\n        this.grid.prepareMove();\n        let changed = false;\n\n        const vertical = (dir === direction.Down || dir === direction.Up);\n        if (vertical) {\n            for (const col of this.grid.cols()) {\n                const colChanged = this.processRowOrCol(col, dir);\n                changed = changed || colChanged;\n            }\n        } else {\n            for (const row of this.grid.rows()) {\n                const rowChanged = this.processRowOrCol(row, dir);\n                changed = changed || rowChanged;\n            }\n        }\n        return changed;\n    }\n\n    public playMove(dir: direction) {\n        if (this.done) {\n            return;\n        }\n        const changed = this.makeMove(dir);\n        if (changed) {\n            const pos = this.grid.randomEmptyPosition();\n            if (pos) {\n                const newVal = this.newCellValue();\n                this.grid.addCell(pos!, newVal);\n            }\n            this._won = this.hasWon();\n            this._done = this._won || !this.canMakeMove();\n        }\n        this.save();\n        this.render();\n    }\n\n    public processRowOrCol(rowOrCol: CellOrNull[], dir: direction): boolean {\n        // when processing a negative direction reverse the row/column first\n        if ((dir === direction.Up) || (dir === direction.Left)) {\n            rowOrCol.reverse();\n        }\n        let slided = this.defragRowOrCol(rowOrCol, dir);\n        const merged = this.mergeCells(rowOrCol, dir);\n        if (merged) {\n            slided = this.defragRowOrCol(rowOrCol, dir) || slided;\n        }\n        return merged || slided;\n    }\n\n    private mergeCells(rowOrCol: CellOrNull[], dir: direction): boolean {\n        let merged = false;\n        let idx = rowOrCol.length - 1;\n        while (idx > 0) {\n            const curr = rowOrCol[idx];\n            const next = rowOrCol[idx - 1];\n            if (curr && curr.canMergeWith(next)) {\n                this.score += this.grid.mergeCellWith(curr, next!, dir);\n                rowOrCol[idx - 1] = null; // updating rowOrCol is only for testing purposes\n                merged = true;\n            }\n            idx--;\n        }\n        return merged;\n    }\n\n    private defragRowOrCol(rowOrCol: CellOrNull[], d: direction): boolean {\n        let changed = false;\n        let idx = rowOrCol.length - 1;\n        while (idx > 0) {\n            const cell = rowOrCol[idx];\n            let slided;\n            if (!cell) {\n                slided = this.slideAllCellsOverOnce(rowOrCol, idx, d);\n                changed = changed || slided;\n            }\n            // when nothing has changed, check next position\n            if (cell || !slided) {\n                idx--;\n            }\n        }\n        return changed;\n    }\n\n    private slideAllCellsOverOnce(rowOrCol: CellOrNull[], startIdx: number, d: direction): boolean {\n        let moved = false;\n        for (let idx = startIdx; idx > 0; idx--) {\n            const nextCell = rowOrCol[idx - 1];\n            if (nextCell) {\n                this.grid.moveCell(nextCell, d);\n                moved = true;\n            }\n            rowOrCol[idx] = nextCell; // updating rowOrCol is only for testing purposes\n        }\n        rowOrCol[0] = null; // updating rowOrCol is only for testing\n        return moved;\n    }\n\n    private render() {\n        if (this._renderer) {\n            this._renderer.render(this.toRenderState());\n        }\n    }\n    private updateScores() {\n        if (this._renderer) {\n            this._renderer.updatescores(this.score, this.highscore);\n        }\n    }\n\n    private save() {\n        if (this._storage) {\n            this._storage.save(this.toState());\n        }\n    }\n}\n","import { Pos } from './position';\nimport { Direction, direction, DIRECTIONS } from './direction';\nimport { Cell, ICellState, ICellRenderState, CellOrNull } from './cell';\nimport { randomInt, nf } from './helpers';\n\nexport interface IGridState {\n    size: number;\n    cells: ICellState[]; // contains only filled cells\n}\n\nexport interface IGridRenderState {\n    size: number;\n    cells: ICellRenderState[]; // contains only filled cells\n    removedCells: ICellRenderState[];\n}\n\nexport class Grid {\n\n    public static fromArray(vals: number[], size: number = 4): Grid {\n        if (vals.length !== size * size) {\n            throw Error(\"invalid array length\");\n        }\n        const grid = new Grid(size);\n        for (const [idx, val] of vals.entries()) {\n            if (val > 0) {\n                grid.addCell(grid.indexToPos(idx), val);\n            }\n        }\n        return grid;\n    }\n\n    public static fromState(state: IGridState): Grid {\n        const grid = new Grid(state.size);\n        for (const cellState of state.cells) {\n            grid.addCell(Pos.fromState(cellState.pos), cellState.val);\n        }\n        return grid;\n    }\n\n    private _cells: CellOrNull[] = [];\n    private _removedCells: Cell[] = [];\n    private _size: number;\n    get size() {\n        return this._size;\n    }\n\n    constructor(size: number) {\n        this._size = size;\n        this.reset();\n    }\n\n    public reset() {\n        this._cells = [];\n        this._removedCells = [];\n        for (let idx = 0; idx < this.size * this.size; idx++) {\n            this._cells.push(null);\n        }\n    }\n\n    public toState(): IGridState {\n        const cellStates: ICellState[] = [];\n        this._cells.forEach((cell) => {\n            if (cell) {\n                cellStates.push(cell.toState());\n            }\n        });\n        return {\n            size: this.size,\n            cells: cellStates,\n        };\n    }\n\n    public toRenderState(): IGridRenderState {\n        const cellStates: ICellRenderState[] = [];\n        const removedStates: ICellRenderState[]  = [];\n        this._cells.forEach((cell) => {\n            if (cell) {\n                cellStates.push(cell.toRenderState());\n            }\n        });\n        this._removedCells.forEach((cell) => {\n            removedStates.push(cell.toRenderState());\n        });\n        return {\n            size: this.size,\n            cells: cellStates,\n            removedCells: removedStates\n        };\n    }\n\n    public toArray(): number[] {\n        const vals = [];\n        for (const cell of this._cells) {\n            vals.push(cell ? cell.val : 0);\n        }\n        return vals;\n    }\n\n    public toString(): string {\n        let s = '';\n        for (const row of this.rows()) {\n            for (const cell of row) {\n                s = s + ' ' + (cell ? nf(cell.val, 2) : '__');\n            }\n            s += '\\n';\n        }\n        return s;\n    }\n\n    public addCell(pos: Pos, val: number) {\n        const cell = new Cell(val, pos);\n        const idx = this.posToIndex(pos);\n        this._cells[idx] = cell;\n    }\n\n    public emptyPositions(): Pos[] {\n        const empty: Pos[] = [];\n        for (let idx = 0; idx < this.size * this.size; idx++) {\n            const cell = this._cells[idx];\n            if (cell === null) {\n                empty.push(this.indexToPos(idx));\n            }\n        }\n        return empty;\n    }\n\n    public cellIsEmpty(pos: Pos) {\n        const idx = this.posToIndex(pos);\n        return (this._cells[idx] !== null);\n    }\n\n    public filledCells(): Cell[] {\n        const filled: Cell[] = [];\n        this._cells.forEach((cell) => {\n            if (cell) {\n                filled.push(cell);\n            }\n        });\n        return filled;\n    }\n\n    public rows(): CellOrNull[][] {\n        const result: CellOrNull[][] = [];\n        for (let y = 0; y < this.size; y++) {\n            const row: CellOrNull[] = [];\n            for (let x = 0; x < this.size; x++) {\n                const idx = this.xyToIndex(x, y);\n                row.push(this._cells[idx]);\n            }\n            result.push(row);\n        }\n        return result;\n    }\n\n    public cols(): CellOrNull[][] {\n        const result: CellOrNull[][] = [];\n        for (let x = 0; x < this.size; x++) {\n            const col: CellOrNull[] = [];\n            for (let y = 0; y < this.size; y++) {\n                const idx = this.xyToIndex(x, y);\n                col.push(this._cells[idx]);\n            }\n            result.push(col);\n        }\n        return result;\n    }\n\n    public randomEmptyPosition(): Pos|null {\n        const empty = this.emptyPositions();\n        const idx = randomInt(empty.length);\n        return empty.length ? empty[idx] : null;\n    }\n\n    public prepareMove() {\n        this._removedCells = []; // reset\n        const cells = this.filledCells();\n        for (const cell of cells) {\n            cell.prepareMove();\n        }\n    }\n\n    public canMergeCells(): boolean {\n        for (let x = 0; x < this.size; x++) {\n            for (let y = 0; y < this.size; y++) {\n                const idx = this.xyToIndex(x, y);\n                const right = x < this.size - 1 ? this.xyToIndex(x + 1, y) : null;\n                const below = y < this.size - 1 ? this.xyToIndex(x, y + 1) : null;\n                const cell = this._cells[idx];\n                const cellRight = right ? this._cells[right] : null;\n                const cellBelow = below ? this._cells[below] : null;\n                if (cell) {\n                    // only need to check to the right and below:\n                    if ((cellRight && (cell.val === cellRight.val)) ||\n                        (cellBelow && (cell.val === cellBelow.val))) {\n                        return true;\n                    }\n                }\n            }\n        }\n        return false;\n    }\n\n    public canShiftCells(): boolean {\n        const empty = this.emptyPositions();\n        return empty.length > 0;\n    }\n\n    public moveCell(cell: Cell, dir: direction) {\n        // get direction vector\n        const vector = DIRECTIONS[dir];\n        // update cell\n        const oldpos = cell.pos;\n        const newpos = cell.pos.move(vector);\n        cell.pos = newpos;\n        // update grid\n        const oldidx = this.posToIndex(oldpos);\n        this._cells[oldidx] = null;\n        const newidx = this.posToIndex(newpos);\n        this._cells[newidx] = cell;\n    }\n\n    public mergeCellWith(cell: Cell, other: Cell, dir: direction): number {\n        cell.val =  cell.val + other.val;\n        cell.setMergeDir(dir);\n        const newPos = cell.pos.copy();\n        this.removeCell(other, newPos);\n        return cell.val;\n    }\n\n    private xyToIndex(x: number, y: number): number {\n        return y * this.size + x;\n    }\n\n    private posToIndex(pos: Pos): number {\n        return pos.y * this.size + pos.x;\n    }\n\n    private indexToPos(idx: number): Pos {\n        const p = new Pos();\n        p.y = Math.floor(idx / this.size);\n        p.x = idx % this.size;\n        return p;\n\n    }\n\n    private removeCell(cell: Cell, newPos: Pos) {\n        // set new position for removed cell\n        const oldPpos = cell.pos;\n        cell.pos = newPos;\n        // keep the removed cell (for displaying purposes)\n        this._removedCells.push(cell);\n        // update grid\n        const idx = this.posToIndex(oldPpos);\n        this._cells[idx] = null;\n    }\n}\n","export function randomInt(maxExclusive: number): number {\n    return Math.floor(Math.random() * Math.floor(maxExclusive));\n}\n\nexport function nf(val: number, width: number): string {\n    let s = val.toString();\n    while (s.length < width) {\n        s = ' ' + s;\n    }\n    return s;\n}\n","import { IGameRenderState, IRenderer} from './game';\nimport { ICellRenderState } from './cell';\nimport { direction } from './direction';\n\ninterface ICellRenderStateEx extends ICellRenderState {\n    appearing: boolean;\n    disappearing: boolean;\n    flipping: boolean;\n    moving: boolean;\n    moveunder: boolean;\n}\ninterface ICellToAnimate {\n    cell: HTMLDivElement;\n    state: ICellRenderStateEx;\n}\ninterface ITileToFlip {\n    tile: HTMLDivElement;\n    dir: direction;\n}\nexport class HTMLRenderer implements IRenderer {\n    private container: HTMLElement;\n    private scoreElmt: HTMLElement;\n    private highscoreElmt: HTMLElement;\n    private doneStateRendered: boolean = false;\n    private renderDoneStateAfter: boolean = false;\n    private cellsToMove: ICellToAnimate[] = [];\n    private cellsToAppear: ICellToAnimate[] = [];\n    private cellsToDisappear: ICellToAnimate[] = [];\n    private tilesToFlip: ITileToFlip[] = [];\n\n    constructor(container: HTMLElement, scoreElmt: HTMLElement, highscoreElmt: HTMLElement, gridsize: number) {\n        this.container = container;\n        this.container.innerHTML = '';\n        this.scoreElmt = scoreElmt;\n        this.scoreElmt.innerHTML = '';\n        this.highscoreElmt = highscoreElmt;\n        this.highscoreElmt.innerHTML = '';\n        this.setGridSizeCSS(gridsize);\n    }\n\n    public updatescores(score: number, highscore: number) {\n        this.scoreElmt.innerHTML = score.toString();\n        this.highscoreElmt.innerHTML = highscore.toString();\n    }\n\n    public render(state: IGameRenderState) {\n        if (!state.done) {\n            this.doneStateRendered = false; // reset, possible new game\n        } else {\n            if (this.doneStateRendered) {\n                return; // one needed once\n            } else {\n                // render last move first\n                state.done = false;\n                // we will render the done state after that\n                this.renderDoneStateAfter = true;\n            }\n        }\n        this.renderInitialState(state);\n    }\n\n    private renderInitialState(state: IGameRenderState) {\n\n        window.requestAnimationFrame(() => {\n\n            this.container.innerHTML = '';\n\n            const grid = document.createElement('div');\n            grid.className = state.done ? 'grid done' : 'grid';\n\n            this.cellsToMove = [];\n            this.cellsToAppear = [];\n            this.cellsToDisappear = [];\n            this.tilesToFlip = [];\n            let cellstates = state.grid.cells;\n\n            // add disappearing flags\n            for (const cellstate of state.grid.removedCells) {\n                (cellstate as ICellRenderStateEx).disappearing = true;\n            }\n            // add append removed cells, so we can process all in 1 go\n            cellstates = cellstates.concat(state.grid.removedCells);\n\n            for (const cellstate of cellstates) {\n                const rs = cellstate as ICellRenderStateEx;\n                rs.appearing = cellstate.new;\n                rs.moving = (cellstate.oldPos !== undefined);\n                rs.flipping = (cellstate.oldVal !== undefined);\n                rs.moveunder = rs.moving && (!rs.flipping);\n\n                const cell = this.makeCell(rs);\n                const tile = this.makeTile(rs);\n                cell.appendChild(tile);\n                grid.appendChild(cell);\n            }\n            this.container.appendChild(grid);\n\n            if (state.done) {\n                // render \"game over\" state\n                const gameover = document.createElement('div');\n                gameover.id = 'gameover';\n                gameover.innerHTML = '<span>no more moves\\nGAME OVER</span>';\n                this.container.appendChild(gameover);\n                this.doneStateRendered = true;\n            }\n\n            // wait for old state to render at least 1 frame, before setting the new state\n            this.continueInNextFrame(state);\n        });\n    }\n\n    private makeCell(rs: ICellRenderStateEx): HTMLDivElement {\n        const cell = document.createElement('div');\n        if (rs.moving) {\n            // set old pos now\n            const oldX = rs.oldPos!.x;\n            const oldY = rs.oldPos!.y;\n            cell.className = this.getCellClassesBefore(oldX, oldY, rs);\n            // move later\n            this.cellsToMove.push( {cell, state: rs} );\n\n        } else {\n            const x = rs.pos.x;\n            const y = rs.pos.y;\n            cell.className = this.getCellClassesBefore(x, y, rs);\n        }\n        if (rs.appearing) {\n            // appear later\n            this.cellsToAppear.push( {cell, state: rs} );\n        }\n        if (rs.disappearing) {\n            // disappear later\n            this.cellsToDisappear.push( {cell, state: rs} );\n        }\n        return cell;\n    }\n\n    private makeTile(rs: ICellRenderStateEx): HTMLDivElement {\n        const tile = document.createElement('div');\n        tile.className = 'tile';\n        const front = document.createElement('div');\n\n        if (rs.flipping) {\n            // set old val to front and new val to back\n            front.innerHTML = rs.oldVal!.toString();\n            front.className = 'front ' + this.valueToClassName(rs.oldVal!);\n            tile.appendChild(front);\n\n            const back = document.createElement('div');\n            back.innerHTML = rs.val.toString();\n            back.className = 'back ' + this.valueToClassName(rs.val) +\n                ' ' + this.willflipClassFromDir(rs.mergeDir!);\n            tile.appendChild(back);\n            // flip later\n            this.tilesToFlip.push( {tile, dir: rs.mergeDir!} );\n\n        } else {\n            // use front only\n            front.innerHTML = rs.val.toString();\n            front.className = 'front ' + this.valueToClassName(rs.val);\n            tile.appendChild(front);\n\n        }\n        return tile;\n    }\n\n    private continueInNextFrame(state: IGameRenderState) {\n\n        window.requestAnimationFrame(() => {\n\n            // set new positions\n            for (const cell of this.cellsToMove) {\n                const x = cell.state.pos.x;\n                const y = cell.state.pos.y;\n                cell.cell.className = this.getCellClassesAfter(x, y, cell.state);\n            }\n            // appear new tiles\n            for (const cell of this.cellsToAppear) {\n                const x = cell.state.pos.x;\n                const y = cell.state.pos.y;\n                cell.cell.className = this.getCellClassesAfter(x, y, cell.state);\n            }\n            // disappear removed tiles\n            for (const cell of this.cellsToDisappear) {\n                const x = cell.state.pos.x;\n                const y = cell.state.pos.y;\n                cell.cell.className = this.getCellClassesAfter(x, y, cell.state);\n            }\n            // flip tiles\n            for (const tile of this.tilesToFlip) {\n                tile.tile.className = 'tile ' + this.flippedClassFromDir(tile.dir);\n            }\n\n            if (this.renderDoneStateAfter) {\n                // allow for some time to let animations finish\n                window.setTimeout(() => {\n                    window.requestAnimationFrame(() => {\n                       state.done = true;\n                       // move all cells to removedcells\n                       state.grid.removedCells = state.grid.removedCells.concat(state.grid.cells);\n                       state.grid.cells = [];\n                       // reset additional cell status\n                       state.grid.removedCells.forEach((cell) => {\n                           cell.oldPos = undefined;\n                           cell.oldVal = undefined;\n                           cell.mergeDir = undefined;\n                           cell.new = false;\n                       });\n                       this.renderInitialState(state);\n            });\n                }, 500);\n                this.renderDoneStateAfter = false;\n            }\n        });\n    }\n\n    private xyToClassNames(x: number, y: number): string {\n        return `x-${x} y-${y}`;\n    }\n\n    private valueToClassName(val: number, front: boolean = true): string {\n        const exponent = Math.log2(val);\n        return `val-${exponent}`;\n    }\n\n    private setGridSizeCSS(gridsize: number) {\n        const root = document.querySelector('html');\n        if (root) {\n            root.style.setProperty('--gridsize', gridsize.toString());\n        }\n    }\n\n    private willflipClassFromDir(dir: direction) {\n        return 'willflip-' + direction[dir];\n    }\n\n    private flippedClassFromDir(dir: direction) {\n        return 'flipped-' + direction[dir];\n    }\n\n    private getCellClassesBefore(x: number, y: number, rs: ICellRenderStateEx): string {\n        let classes = 'cell ' + this.xyToClassNames(x, y);\n        if (rs.moveunder) {\n            classes += ' moveunder';\n        }\n        if (rs.appearing) {\n            classes += ' willappear';\n        }\n        if (rs.disappearing) {\n            classes += ' willdisappear';\n        }\n        return classes;\n    }\n\n    private getCellClassesAfter(x: number, y: number, rs: ICellRenderStateEx): string {\n        let classes = 'cell ' + this.xyToClassNames(x, y);\n        if (rs.moveunder) {\n            classes += ' moveunder';\n        }\n        if (rs.appearing) {\n            classes += ' appeared';\n        }\n        if (rs.disappearing) {\n            classes += ' disappeared';\n        }\n        return classes;\n    }\n}\n","import { direction } from './direction';\n\ntype callback = (...args: any[]) => void;\ninterface IEvents {\n    [event: string]: callback[];\n}\n\nexport interface IInputHandler {\n    on(event: string, cb: callback): void;\n    reset(): void;\n}\n\nexport class InputHandler implements IInputHandler {\n    private _container: HTMLElement;\n    private _events: IEvents = {};\n    private _restartBtn: HTMLElement;\n\n    constructor(container: HTMLElement, restartBtn: HTMLElement) {\n        this._container = container;\n        document.addEventListener('keydown', this.handleKeyDown.bind(this));\n        this._restartBtn = restartBtn;\n        this._restartBtn.addEventListener('click', this.restartClick.bind(this));\n        this.reset();\n    }\n    public reset() {\n        this._events = {};\n    }\n\n    public on(event: string, cb: callback) {\n        this._events[event] = (this._events[event] || []);\n        this._events[event].push(cb);\n    }\n\n    private trigger(event: string, ...args: any[]) {\n        const callbacks = this._events[event];\n        for (const cb of callbacks) {\n            cb(...args);\n        }\n    }\n    private restartClick(ev: MouseEvent) {\n        this.trigger('restart');\n        ev.preventDefault();\n    }\n\n    private handleKeyDown(ev: KeyboardEvent) {\n        if (ev.defaultPrevented) {\n            return; // do nothing if the event was already processed\n        }\n        const modifiers = ev.altKey || ev.ctrlKey || ev.metaKey || ev.shiftKey;\n        if (modifiers) {\n            return;\n        }\n        switch (ev.key) {\n            case \"ArrowUp\":\n                this.trigger('move', direction.Up);\n                break;\n            case \"ArrowRight\":\n                this.trigger('move', direction.Right);\n                break;\n            case \"ArrowDown\":\n                this.trigger('move', direction.Down);\n                break;\n            case \"ArrowLeft\":\n                this.trigger('move', direction.Left);\n                break;\n            default:\n                return; // quit when we don't handle this key event.\n        }\n        ev.preventDefault(); // cancel default action to avoid handling key twice\n    }\n}\n","import { Direction } from './direction';\n\nexport interface IPos {\n    x: number;\n    y: number;\n}\nexport class Pos implements IPos {\n    public static fromState(pos: IPos) {\n        return new Pos(pos.x, pos.y);\n    }\n\n    public x: number;\n    public y: number;\n    constructor(x?: number, y?: number) {\n        this.x = x ? x : 0;\n        this.y = y ? y : 0;\n    }\n    public move(dir: Direction) {\n        return new Pos(this.x + dir.x, this.y + dir.y);\n    }\n    public toString() {\n        return `(${this.x}, ${this.y})`;\n    }\n    public copy(): Pos {\n        return new Pos(this.x, this.y);\n    }\n}\n","import { IGameState } from \"./game\";\n\nexport interface IGameStorage {\n    load(): IGameState | null;\n    save(state: IGameState): void;\n    storeHighScore(gameSize: number, score: number): void;\n    getHighScore(gameSize: number): number;\n}\n\ninterface IHighScores {\n    [size: number]: number;\n}\n\ninterface IData {\n    [key: string]: any;\n}\nclass FakeStorage implements Storage {\n    get length() {\n        return Object.keys(this._data).length;\n    }\n    private _data: IData;\n    constructor() {\n        this._data = {};\n    }\n    public clear() {\n        this._data = {};\n    }\n    public getItem(key: string): string | null {\n        return this._data.hasOwnProperty(key) ? this._data[key] : undefined;\n    }\n    public key(index: number): string | null {\n        return Object.keys(this._data)[index];\n    }\n    public removeItem(key: string) {\n        delete this._data[key];\n    }\n    public setItem(key: string, data: string) {\n        this._data[key] = data;\n    }\n    [key: string]: any;\n    [index: number]: string;\n}\n\nconst theFakeStorage = new FakeStorage();\n\nconst gameStateKey = 'gamestate';\nconst highscoreKey = 'highscore_';\n\nexport class GameStorage implements IGameStorage {\n    private _highscores: IHighScores;\n    private _storage: Storage;\n    constructor() {\n        this._highscores = [];\n        if (!this.localStorageSupported()) {\n            this._storage = theFakeStorage;\n        } else {\n            this._storage = localStorage;\n        }\n    }\n    public load(): IGameState | null {\n        const stateJSON = this._storage.getItem(gameStateKey);\n        if (stateJSON) {\n            return JSON.parse(stateJSON) as IGameState;\n        } else {\n            return null;\n        }\n    }\n\n    public save(state: IGameState) {\n        const stateJSON = JSON.stringify(state);\n        this._storage.setItem(gameStateKey, stateJSON);\n    }\n\n    public storeHighScore(gameSize: number, score: number) {\n        const key = highscoreKey + gameSize.toString();\n        this._storage.setItem(key, score.toString());\n    }\n\n    public getHighScore(gameSize: number): number {\n        const key = highscoreKey + gameSize.toString();\n        const scoreStr = this._storage.getItem(key);\n        const score = scoreStr ? parseInt(scoreStr, 10) : NaN;\n        return isNaN(score) ? 0 : score;\n    }\n\n    private localStorageSupported(): boolean {\n        const testKey = \"test\";\n        try {\n            const storage = window.localStorage;\n            storage.setItem(testKey, \"1\");\n            storage.removeItem(testKey);\n            return true;\n        } catch (error) {\n            return false;\n        }\n    }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import '../styles/styles.sass';\nimport { Game } from './game';\nimport { ConsoleRenderer} from './consolerenderer';\nimport { CanvasRenderer } from './canvasrenderer';\nimport { HTMLRenderer } from './htmlrenderer';\nimport { InputHandler } from './inputhandler';\nimport { Grid } from './grid';\nimport { GameStorage } from './storage';\n\nif (document.readyState === 'complete') {\n    // console.log( 'document is already ready' );\n    startup();\n} else {\n    document.addEventListener('DOMContentLoaded', function(ev: Event) {\n        // console.log( 'DOMContentLoaded' );\n        startup();\n    });\n}\n\nfunction startup() {\n    const cntnr = document.getElementById('game');\n    const restartBtn = document.getElementById('restart') as HTMLDivElement;\n    const scoreElmt = document.getElementById('score');\n    const highscoreElmt = document.getElementById('highscore');\n    const sizeSelect = document.getElementById('sizeSelect') as HTMLSelectElement;\n\n    if (cntnr && restartBtn) {\n        let gridsize = 4;\n\n        // const renderer = new ConsoleRenderer();\n        // const renderer = new CanvasRenderer(cntnr, scoreElmt!, highscoreElmt!);\n        let renderer = new HTMLRenderer(cntnr, scoreElmt!, highscoreElmt!, gridsize);\n        const storage = new GameStorage();\n        const inputHandler = new InputHandler(cntnr, restartBtn);\n        const testvals = [\n            32,   64,   4,   16,\n           128,  512,  64,    2,\n             2,    8,  64,  256,\n             4,  128,   8, 1024\n        ];\n\n        let game: Game;\n        let  gameState = storage.load();\n        gameState = null;\n\n        sizeSelect!.addEventListener('change', (ev) => {\n            gridsize = parseInt(sizeSelect.value, 10);\n            renderer = new HTMLRenderer(cntnr, scoreElmt!, highscoreElmt!, gridsize);\n            game = new Game(gridsize, renderer, inputHandler, storage);\n            game.start(2);\n        });\n\n        if (gameState) {\n            game = Game.fromState(gameState, renderer, inputHandler, storage);\n        } else {\n            // const grid = Grid.fromArray(testvals, 8);\n            // game = new Game(grid, renderer, inputHandler, storage);\n            game = new Game(gridsize, renderer, inputHandler, storage);\n        }\n        game.start(2);\n    }\n}\n"],"names":["___CSS_LOADER_EXPORT___","push","module","id","exports","cssWithMappingToString","list","toString","this","map","item","content","needLayer","concat","length","join","i","modules","media","dedupe","supports","layer","undefined","alreadyImportedModules","k","_k","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","data","sourceMapping","sourceURLs","sources","source","sourceRoot","stylesInDOM","getIndexByIdentifier","identifier","result","modulesToDom","options","idCountMap","identifiers","base","count","indexByIdentifier","obj","css","sourceMap","references","updater","addElementStyle","byIndex","splice","api","domAPI","update","newObj","remove","lastIdentifiers","newList","index","newLastIdentifiers","_i","_index","memo","insert","style","target","styleTarget","document","querySelector","window","HTMLIFrameElement","contentDocument","head","e","getTarget","Error","appendChild","element","createElement","setAttributes","attributes","styleElement","nonce","setAttribute","insertStyleElement","styleTagTransform","apply","parentNode","removeChild","removeStyleElement","styleSheet","cssText","firstChild","createTextNode","Cell","constructor","val","pos","_oldVal","_oldPos","_mergeDir","_new","_val","_pos","Pos","static","state","fromState","merged","prepareMove","setMergeDir","dir","canMergeWith","other","toState","toRenderState","oldPos","oldVal","mergeDir","new","Direction","x","y","UP","RIGHT","DOWN","LEFT","direction","DIRECTIONS","Game","gridOrSize","renderer","inputHandler","storage","_started","_won","_done","_score","Grid","grid","size","_renderer","_inputHandler","_storage","reset","on","playMove","bind","restart","game","won","done","score","highscore","getHighScore","storeHighScore","updateScores","start","fillAtStart","randomEmptyPosition","addCell","newCellValue","save","render","randomInt","hasWon","toArray","indexOf","canMakeMove","canShiftCells","canMergeCells","makeMove","changed","Down","Up","col","cols","colChanged","processRowOrCol","row","rows","rowChanged","newVal","rowOrCol","Left","reverse","slided","defragRowOrCol","mergeCells","idx","curr","next","mergeCellWith","d","cell","slideAllCellsOverOnce","startIdx","moved","nextCell","moveCell","updatescores","_cells","_removedCells","_size","vals","entries","indexToPos","cellState","cells","cellStates","forEach","removedStates","removedCells","s","nf","posToIndex","emptyPositions","empty","cellIsEmpty","filledCells","filled","xyToIndex","right","below","cellRight","cellBelow","vector","oldpos","newpos","move","oldidx","newidx","newPos","copy","removeCell","p","Math","floor","oldPpos","maxExclusive","random","width","container","scoreElmt","highscoreElmt","gridsize","doneStateRendered","renderDoneStateAfter","cellsToMove","cellsToAppear","cellsToDisappear","tilesToFlip","innerHTML","setGridSizeCSS","renderInitialState","requestAnimationFrame","className","cellstates","cellstate","disappearing","rs","appearing","moving","flipping","moveunder","makeCell","tile","makeTile","gameover","continueInNextFrame","oldX","oldY","getCellClassesBefore","front","valueToClassName","back","willflipClassFromDir","getCellClassesAfter","flippedClassFromDir","setTimeout","xyToClassNames","log2","root","setProperty","classes","restartBtn","_events","_container","addEventListener","handleKeyDown","_restartBtn","restartClick","event","cb","trigger","args","callbacks","ev","preventDefault","defaultPrevented","altKey","ctrlKey","metaKey","shiftKey","key","Right","theFakeStorage","_data","Object","keys","clear","getItem","hasOwnProperty","removeItem","setItem","gameStateKey","highscoreKey","_highscores","localStorageSupported","localStorage","load","stateJSON","parse","gameSize","scoreStr","parseInt","NaN","isNaN","testKey","error","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","__esModule","a","definition","o","defineProperty","enumerable","get","prop","prototype","call","r","Symbol","toStringTag","value","startup","cntnr","getElementById","sizeSelect","HTMLRenderer","GameStorage","InputHandler","gameState","readyState"],"sourceRoot":""}